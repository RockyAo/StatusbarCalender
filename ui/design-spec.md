# macOS 状态栏日历应用 - UI 设计规范

> 设计理念：打造具有「原生感」的 macOS 状态栏应用，如同系统自带功能的高级进化版

---

## 📐 设计原则

1. **原生感优先**：遵循 macOS Human Interface Guidelines
2. **信息密度平衡**：高密度信息与可读性的平衡
3. **自适应设计**：支持浅色/深色模式自动切换
4. **优雅交互**：微妙的动效和即时的视觉反馈

---

## 1️⃣ 状态栏显示 (Menu Bar Item)

### 功能定位
应用的入口点，承载核心信息展示功能

### 显示模式

#### 完整模式
```
10月24日 周四 农历九月廿二 14:00:05
```

#### 标准模式
```
10月24日 周四 14:00
```

#### 精简模式
```
10月24日 14:00
```

#### 极简模式
```
14:00
```

### 视觉规范

| 属性 | 规范 |
|------|------|
| 字体 | SF Pro Text, Regular |
| 字号 | 13pt (系统菜单栏标准) |
| 颜色 | `.label` (自适应系统配色) |
| 间距 | 各元素间 4pt 间距 |
| 内边距 | 左右各 8pt |
| 高度 | 22pt (系统菜单栏高度) |

### 交互状态

| 状态 | 视觉反馈 |
|------|----------|
| 默认 | 透明背景 |
| Hover | 背景显示浅灰色圆角矩形 (6pt 圆角) |
| 点击 | 背景高亮，与系统控制中心一致 |

### 技术实现要点
- 使用 `NSStatusItem` 
- 支持动态宽度调整
- 实时刷新 (秒级更新时使用 Timer)

---

## 2️⃣ 主日历面板 (Main Popover)

### 整体布局

```
┌─────────────────────────────────────┐
│  Header (年月切换 + 导航)            │
├─────────────────────────────────────┤
│  一  二  三  四  五  六  日          │  ← 星期表头
├─────────────────────────────────────┤
│                                     │
│         日历网格 (7×6)               │
│      (包含日期、农历、标记)           │
│                                     │
├─────────────────────────────────────┤
│  Footer (详细信息 + 设置入口)        │
└─────────────────────────────────────┘
```

### 尺寸规范

| 属性 | 数值 |
|------|------|
| 总宽度 | 320pt |
| 总高度 | 380pt (动态) |
| 内边距 | 16pt |
| 圆角 | 12pt |
| 背景效果 | Vibrancy (毛玻璃) |

---

### 2.1 Header 区域

#### 布局结构
```
┌─────────────────────────────────────┐
│ [2024年 10月]  [<] [○] [>]         │
└─────────────────────────────────────┘
```

#### 组件规范

**年月显示**
- 字体：SF Pro Display, Semibold
- 字号：18pt
- 颜色：`.label`
- 交互：点击弹出年月选择器

**导航按钮**
- 大小：28×28pt
- 图标：SF Symbols (`chevron.left`, `chevron.right`, `calendar.circle`)
- Hover 效果：背景显示浅色圆形
- 间距：按钮间 4pt

#### 年月选择器
- 样式：下拉式 Picker
- 年份范围：1900-2100
- 快速定位：支持手势滑动

---

### 2.2 星期表头

#### 布局
```
 一   二   三   四   五   六   日
```

#### 规范

| 属性 | 数值 |
|------|------|
| 字体 | SF Pro Text, Medium |
| 字号 | 11pt |
| 颜色 | `.secondaryLabel` |
| 周末颜色 | `.systemRed` (60% 不透明度) |
| 高度 | 24pt |
| 对齐 | 居中 |

---

### 2.3 日历网格 (核心区域)

#### 网格规范
- **布局**：7列 × 6行 (固定)
- **单元格大小**：40×48pt
- **间距**：2pt

#### 日期单元格设计

```
┌──────────┐
│    休    │  ← 节假日标记 (右上角)
│    15    │  ← 日期数字 (居中)
│   初八   │  ← 农历/节气 (下方)
└──────────┘
```

#### 视觉状态

| 状态 | 样式 |
|------|------|
| 普通日期 | 灰色文字 |
| 当前日期 | 系统强调色圆环包围 + 粗体 |
| 非本月 | 浅灰色，40% 不透明度 |
| Hover | 背景浅色高亮 (4pt 圆角) |
| 周末 | 日期数字微红色调 |

#### 日期数字
- 字体：SF Pro Display, Regular
- 字号：15pt
- 粗体：当前日期使用 Semibold

#### 农历/节气显示
- 字体：SF Pro Text, Regular
- 字号：9pt
- 颜色：`.tertiaryLabel`
- 特殊节气：使用 `.systemOrange` (如立春、冬至)

#### 节假日标记

**休息日标记**
- 样式：小圆点或"休"字
- 位置：右上角
- 颜色：`.systemRed` (浅色模式 #FF3B30, 深色模式 #FF453A)
- 大小：8×8pt (圆点) 或 10pt (文字)

**补班日标记**
- 样式："班"字
- 位置：右上角
- 颜色：`.systemBlue` (浅色模式 #007AFF, 深色模式 #0A84FF)
- 大小：10pt
- 背景：半透明圆角矩形

---

### 2.4 Footer 区域

#### 布局结构
```
┌─────────────────────────────────────┐
│ 甲辰龙年 九月廿二  [⚙️]             │
└─────────────────────────────────────┘
```

#### 详细信息显示
- 字体：SF Pro Text, Regular
- 字号：12pt
- 颜色：`.secondaryLabel`
- 内容：农历年月日 + 生肖 + (可选)星座

#### 设置按钮
- 图标：SF Symbols `gearshape.fill`
- 大小：20×20pt
- 位置：右对齐
- Hover：旋转 45° 动画

---

## 3️⃣ 设置界面 (Settings Window)

### 窗口规范

| 属性 | 数值 |
|------|------|
| 窗口类型 | 标准窗口 (可关闭、最小化) |
| 尺寸 | 480×540pt (固定) |
| 标题 | "状态栏日历 设置" |
| 样式 | 工具栏 + 侧边栏 (可选) |

### 布局方案：Tab 风格

```
┌─────────────────────────────────────┐
│  状态栏日历 设置                     │
├─────────────────────────────────────┤
│ [显示] [时间] [样式] [节假日] [关于]│
├─────────────────────────────────────┤
│                                     │
│         配置项区域                   │
│                                     │
│                                     │
└─────────────────────────────────────┘
```

---

### 3.1 显示 Tab

#### 状态栏内容
```
☐ 显示日期        （示例：10月24日）
☐ 显示星期        （示例：周四）
☐ 显示农历        （示例：农历九月廿二）
☐ 显示秒数        （示例：14:00:05）
```

#### 农历选项
```
农历显示格式：
  ○ 完整格式      （农历九月廿二）
  ○ 简化格式      （九月廿二）
  ○ 仅日期        （廿二）
```

---

### 3.2 时间 Tab

```
时间格式：
  ○ 24小时制      （14:00）
  ○ 12小时制      （2:00 PM）

分隔符：
  ○ 冒号 (:)
  ○ 点号 (.)
  ○ 中文 (时分秒)

☐ 在状态栏显示秒数
```

---

### 3.3 样式 Tab

```
视觉效果：
  ☐ 使用系统强调色
  ☐ 周末使用红色显示

弹出面板：
  ○ 点击显示
  ○ 悬停显示（0.3秒后）

启动：
  ☐ 开机自动启动
  ☐ 启动时隐藏主窗口
```

---

### 3.4 节假日 Tab

```
数据源：
  ☐ 显示中国法定节假日
  ☐ 显示传统节日（春节、端午等）
  ☐ 显示二十四节气

标记显示：
  ☐ 标注休息日（红色"休"）
  ☐ 标注补班日（蓝色"班"）
  
节假日数据：
  [更新节假日数据]  最后更新：2024-10-01
```

---

### 3.5 关于 Tab

```
┌─────────────────┐
│   [App Icon]    │
│                 │
│  状态栏日历      │
│  版本 1.0.0     │
│                 │
│  © 2024        │
└─────────────────┘

[检查更新]  [GitHub]  [反馈问题]
```

---

## 🎨 颜色系统

### 语义颜色

| 用途 | 浅色模式 | 深色模式 |
|------|----------|----------|
| 主要文本 | `#000000` | `#FFFFFF` |
| 次要文本 | `#6C6C70` | `#AFAFAF` |
| 三级文本 | `#C7C7CC` | `#636366` |
| 分隔线 | `#D1D1D6` | `#38383A` |
| 背景 | `#FFFFFF` | `#1C1C1E` |
| 次级背景 | `#F2F2F7` | `#2C2C2E` |

### 功能颜色

| 功能 | 颜色代码 | 用途 |
|------|----------|------|
| 休息日 | `#FF3B30` / `#FF453A` | 节假日标记 |
| 补班日 | `#007AFF` / `#0A84FF` | 调休补班标记 |
| 当前日期 | 系统强调色 | 高亮今日 |
| 节气 | `#FF9500` / `#FF9F0A` | 二十四节气 |

---

## 🎬 交互动效

### 面板弹出动画
- **类型**：Spring Animation
- **方向**：从状态栏位置向下滑入
- **时长**：0.25s
- **缓动**：easeOut
- **附加效果**：淡入 (opacity 0 → 1)

### 日期切换动画
- **类型**：Push Transition
- **方向**：左/右滑动 (取决于前进/后退)
- **时长**：0.3s

### 设置按钮动画
- **Hover**：齿轮图标旋转 45°
- **时长**：0.2s
- **缓动**：easeInOut

### Hover 反馈
- **时长**：0.15s
- **效果**：背景色淡入
- **圆角**：4-6pt

---

## 📱 响应式设计

### 多屏幕适配
- 自动检测状态栏位置
- 面板智能定位，避免超出屏幕边界
- 支持多显示器独立显示

### 刘海屏适配
- MacBook Pro 刘海区域自动避让
- 状态栏图标位置动态调整

---

## ♿️ 无障碍支持

| 功能 | 实现 |
|------|------|
| VoiceOver | 为所有交互元素添加描述 |
| 键盘导航 | 支持 Tab 键切换焦点 |
| 对比度 | 遵循系统「增加对比度」设置 |
| 动态字体 | 支持系统字体大小调整 |
| 色盲模式 | 标记除颜色外增加图标辅助 |

---

## 🔧 技术实现提示

### 推荐技术栈
- **UI 框架**：SwiftUI
- **状态栏**：AppKit NSStatusItem
- **毛玻璃效果**：NSVisualEffectView
- **动画**：SwiftUI Animation / Core Animation

### 性能优化
- 日历数据预计算并缓存
- 农历计算使用 lazy 加载
- 状态栏刷新使用节流 (throttle)
- 面板关闭时释放资源

---

## 📋 设计检查清单

- [ ] 所有文本使用系统字体 SF Pro
- [ ] 所有图标使用 SF Symbols
- [ ] 支持浅色/深色模式
- [ ] 所有颜色使用语义色彩 (Semantic Colors)
- [ ] 交互元素有明确的 Hover 状态
- [ ] 动画时长符合 Apple 指南 (0.2-0.4s)
- [ ] 支持 VoiceOver 无障碍访问
- [ ] 面板在屏幕边缘正常显示
- [ ] 符合 macOS HIG 指南

---

**设计版本**：v1.0
**最后更新**：2024-10-24
